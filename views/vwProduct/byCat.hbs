{{#section 'js'}}
  <script>
    $('.addItem').on('click', function (e) {
      const id = $(this).data('id');
      $('#txtProID').val(id);
      $('#frmAddItem').submit();
    });
  </script>
{{/section}}

<div class="card">
  <h4 class="card-header d-flex justify-content-between">
    Products
  </h4>
  <div class="card-body">
    {{#if this.empty}}
      <h5 class="card-title">Không có dữ liệu</h5>
      <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
    {{else}}
      <form action="/cart/add" method="post" id="frmAddItem">
        <input type="hidden" id="txtProID" name="id">
        <input type="hidden" name="quantity" value="1">
      </form>
      <div class="row">
        {{#each this.products}}
          <div class="col-sm-4 mb-3">
            <div class="card h-100">
              <img class="card-img-top" src="/public/images/products/{{ProID}}/main_thumbs.jpg" alt="{{ProName}}" title="{{ProName}}">
              <div class="card-body">
                <h5 class="card-title">{{ProName}}</h5>
                <h5 class="card-title text-danger">{{format_number Price}}</h5>
                <p class="card-text">{{TinyDes}}</p>
              </div>
              <div class="card-footer text-muted">
                <a class="btn btn-sm btn-outline-primary" href="/products/detail/{{ProID}}" role="button">
                  <i class="fa fa-eye" aria-hidden="true"></i>
                  Details
                </a>
                {{#if ../auth}}
                  <a data-id="{{ProID}}" class="btn btn-sm btn-outline-success addItem" href="javascript:;" role="button">
                    <i class="fa fa-cart-plus" aria-hidden="true"></i>
                    Add to cart
                  </a>
                {{/if}}
              </div>
            </div>
          </div>
        {{/each}}
      </div>
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-end">
          <li class="page-item">
            <a class="page-link" href="#">Previous</a>
          </li>
          {{#each this.pageNumbers}}
            {{#if isCurrent}}
              <li class="page-item active">
                <a class="page-link" href="javascript:;">{{value}}</a>
              </li>
            {{else}}
              <li class="page-item">
                <a class="page-link" href="?page={{value}}">{{value}}</a>
              </li>
            {{/if}}
          {{/each}}
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
      </nav>
    {{/if}}
  </div>
  <div class="card-footer text-muted">
    2 days ago
  </div>
</div>